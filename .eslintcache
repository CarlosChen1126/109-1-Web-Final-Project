[{"C:\\Users\\Benny\\Desktop\\109-1-Web-Final-Project\\src\\components\\Management.js":"1","C:\\Users\\Benny\\Desktop\\109-1-Web-Final-Project\\src\\axios.js":"2","C:\\Users\\Benny\\Desktop\\109-1-Web-Final-Project\\src\\components\\Registrants.js":"3","C:\\Users\\Benny\\Desktop\\109-1-Web-Final-Project\\src\\containers\\App.js":"4"},{"size":4925,"mtime":1607227947743,"results":"5","hashOfConfig":"6"},{"size":1825,"mtime":1607226996646,"results":"7","hashOfConfig":"6"},{"size":1595,"mtime":1607179487750,"results":"8","hashOfConfig":"6"},{"size":1560,"mtime":1607178524825,"results":"9","hashOfConfig":"6"},{"filePath":"10","messages":"11","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"12"},"14f1ww2",{"filePath":"13","messages":"14","errorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":8,"source":null},{"filePath":"15","messages":"16","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"17","messages":"18","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\Users\\Benny\\Desktop\\109-1-Web-Final-Project\\src\\components\\Management.js",["19","20","21"],"import React, { useState,useEffect } from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport { getUserData,deleteUserData,updateUserData } from '../axios'\r\n\r\n\r\n\r\n//let data = [{name:\"張原\",stdID:\"b08901049\"},{name:\"張原嘉\",stdID:\"b08901049\"},{name:\"陳宥辰\",stdID:\"b08901048\"}];\r\n\r\nfunction Management() {\r\n  const [data, setdata] = useState([]);\r\n  const [display_data, setdisplay_data] = useState([\"\"]);\r\n  const [style, setstyle] = useState(\"\");\r\n  const [value, setvalue] = useState(\"\");\r\n\r\n  //跟DB要資料\r\n  useEffect(() => {\r\n    let isUnmount = false;\r\n    if(!data.length&&!isUnmount){\r\n       getUserData().then(result=>setdata(result))\r\n    }\r\n    if(display_data[0]!==\"\"){\r\n      handle_search(style,value)\r\n    }\r\n    return () => isUnmount = true;\r\n  },[data])\r\n\r\n  //處理查詢\r\n  const handle_search = (style,value) => {\r\n    let display_da = [];\r\n    if(style===\"\"){\r\n      //顯示所有資料\r\n      for (var i = 0; i < data.length; i++) {\r\n        let element = data[i];\r\n        element.index = i;\r\n        display_da.push(element);\r\n      }\r\n      setstyle(\"\");\r\n      setvalue(\"\");\r\n    }\r\n    else{\r\n      for (var i = 0; i < data.length; i++) {\r\n        if(data[i][style]===value){\r\n          let element = data[i];\r\n          element.index = i;\r\n          display_da.push(element);\r\n        }\r\n      }\r\n      setstyle(style);\r\n      setvalue(value);\r\n    }\r\n    setdisplay_data(display_da);\r\n    }\r\n\r\n  //修改跟刪除\r\n  const handle_revise_delete = async (bt_name,revise_value,index) => {\r\n    if(bt_name===\"revise\"){\r\n      updateUserData(data[index]._id,revise_value.stdID,revise_value.name)\r\n      let list = [...data];\r\n      list[index] = revise_value;\r\n      setdata(list);\r\n    }\r\n    else if(bt_name===\"delete\"){\r\n      const msg = await deleteUserData(data[index]._id)\r\n      if (msg){\r\n        let list = [...data];\r\n        list.splice(index,1);\r\n        setdata(list);\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <h2>管理端管理頁面</h2>\r\n      <Search text=\"學號\" onClick={handle_search}/>\r\n      <Search text=\"姓名\" onClick={handle_search}/>\r\n      <button onClick={handle_search}>顯示所有資料</button>\r\n      {display_data[0]===\"\" ? <div></div> : <Display display_data={display_data} onClick={handle_revise_delete}></Display>}\r\n    </>\r\n  );\r\n  }\r\n\r\nfunction Display(props) {\r\n  const { display_data,onClick } = props;\r\n\r\n  if(display_data.length===0){\r\n    return <h4>查無資料QQ</h4>;\r\n  }\r\n  else{\r\n    let dis = display_data.map((obj)=>{\r\n    return <SearchData obj={obj} key={obj.index} onClick={onClick}></SearchData>\r\n  });\r\n    return(\r\n      <>\r\n        <h4>查詢結果:</h4>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>姓名</th>\r\n              <th>學號</th>\r\n              <th>更新名字</th>\r\n              <th>更新學號</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {dis}\r\n          </tbody>\r\n        </table>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nfunction Search(props) {\r\n  const { text,onClick } = props;\r\n  const [value, setvalue] = useState(\"\");\r\n\r\n  const handle_click = ()=>{\r\n    if(text===\"學號\"){\r\n      onClick(\"stdID\",value)\r\n    }\r\n    else if(text===\"姓名\"){\r\n      onClick(\"name\",value)\r\n    }\r\n    setvalue(\"\");\r\n  }\r\n  return (\r\n    <>\r\n      <div>\r\n        {text+\"查詢 : \"}\r\n        <input type=\"text\"  placeholder={\"輸入\"+text} value={value} onChange={(e)=>{setvalue(e.target.value)}}/>\r\n        <button onClick={handle_click}>查詢</button>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction SearchData(props){\r\n  const {onClick,obj } = props;\r\n  const [name, setname] = useState(\"\");\r\n  const [stdID, setstdID] = useState(\"\");\r\n\r\n  const handle_click = (event)=>{\r\n    if(event.target.name===\"revise\"){\r\n      if(name===\"\" && stdID===\"\"){\r\n        onClick(event.target.name,{name:obj.name,stdID:obj.stdID},obj.index);\r\n      }\r\n      else if(name===\"\"){\r\n        onClick(event.target.name,{name:obj.name,stdID:stdID},obj.index);\r\n      }\r\n      else if(stdID===\"\"){\r\n        onClick(event.target.name,{name:name,stdID:obj.stdID},obj.index);\r\n      }\r\n      else{\r\n        onClick(event.target.name,{name:name,stdID:stdID},obj.index);\r\n      }\r\n      setname(\"\");\r\n      setstdID(\"\");\r\n    }\r\n    else if(event.target.name===\"delete\"){\r\n      onClick(event.target.name,\"\",obj.index);\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      <tr>\r\n        <td>{obj.name}</td>\r\n        <td>{obj.stdID}</td>\r\n        <td><input placeholder={obj.name}  value={name} onChange={(e)=>{setname(e.target.value)}}></input></td>\r\n        <td><input placeholder={obj.stdID} value={stdID} onChange={(e)=>{setstdID(e.target.value)}}></input></td>\r\n        <td>\r\n          <button onClick={handle_click} name=\"revise\">修改</button>\r\n          <button onClick={handle_click} name=\"delete\">删除</button>\r\n        </td>\r\n      </tr>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Management;","C:\\Users\\Benny\\Desktop\\109-1-Web-Final-Project\\src\\axios.js",["22","23","24","25","26","27","28","29","30","31","32"],"C:\\Users\\Benny\\Desktop\\109-1-Web-Final-Project\\src\\components\\Registrants.js",["33"],"C:\\Users\\Benny\\Desktop\\109-1-Web-Final-Project\\src\\containers\\App.js",["34"],{"ruleId":"35","severity":1,"message":"36","line":2,"column":8,"nodeType":"37","messageId":"38","endLine":2,"endColumn":17},{"ruleId":"39","severity":1,"message":"40","line":25,"column":5,"nodeType":"41","endLine":25,"endColumn":11,"suggestions":"42"},{"ruleId":"43","severity":1,"message":"44","line":41,"column":16,"nodeType":"37","messageId":"45","endLine":41,"endColumn":17},{"ruleId":"46","severity":1,"message":"47","line":23,"column":16,"nodeType":"48","messageId":"49","endLine":23,"endColumn":32,"fix":"50"},{"ruleId":"46","severity":1,"message":"51","line":24,"column":9,"nodeType":"48","messageId":"49","endLine":24,"endColumn":39,"fix":"52"},{"ruleId":"35","severity":1,"message":"53","line":24,"column":25,"nodeType":"37","messageId":"38","endLine":24,"endColumn":39},{"ruleId":"46","severity":1,"message":"47","line":39,"column":12,"nodeType":"48","messageId":"49","endLine":39,"endColumn":28,"fix":"54"},{"ruleId":"46","severity":1,"message":"51","line":40,"column":5,"nodeType":"48","messageId":"49","endLine":40,"endColumn":35,"fix":"55"},{"ruleId":"46","severity":1,"message":"47","line":53,"column":12,"nodeType":"48","messageId":"49","endLine":53,"endColumn":28,"fix":"56"},{"ruleId":"46","severity":1,"message":"51","line":54,"column":5,"nodeType":"48","messageId":"49","endLine":54,"endColumn":35,"fix":"57"},{"ruleId":"35","severity":1,"message":"53","line":54,"column":21,"nodeType":"37","messageId":"38","endLine":54,"endColumn":35},{"ruleId":"46","severity":1,"message":"47","line":73,"column":12,"nodeType":"48","messageId":"49","endLine":73,"endColumn":28,"fix":"58"},{"ruleId":"46","severity":1,"message":"51","line":74,"column":5,"nodeType":"48","messageId":"49","endLine":74,"endColumn":35,"fix":"59"},{"ruleId":"35","severity":1,"message":"53","line":74,"column":21,"nodeType":"37","messageId":"38","endLine":74,"endColumn":35},{"ruleId":"35","severity":1,"message":"36","line":2,"column":8,"nodeType":"37","messageId":"38","endLine":2,"endColumn":17},{"ruleId":"35","severity":1,"message":"60","line":1,"column":17,"nodeType":"37","messageId":"38","endLine":1,"endColumn":25},"no-unused-vars","'PropTypes' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'display_data', 'handle_search', 'style', and 'value'. Either include them or remove the dependency array.","ArrayExpression",["61"],"no-redeclare","'i' is already defined.","redeclared","no-useless-rename","Destructuring assignment message unnecessarily renamed.","Property","unnecessarilyRenamed",{"range":"62","text":"63"},"Destructuring assignment registerResult unnecessarily renamed.",{"range":"64","text":"65"},"'registerResult' is assigned a value but never used.",{"range":"66","text":"63"},{"range":"67","text":"65"},{"range":"68","text":"63"},{"range":"69","text":"65"},{"range":"70","text":"63"},{"range":"71","text":"65"},"'useState' is defined but never used.",{"desc":"72","fix":"73"},[540,556],"message",[567,597],"registerResult",[902,918],[925,955],[1168,1184],[1191,1221],[1527,1543],[1550,1580],"Update the dependencies array to be: [data, display_data, handle_search, style, value]",{"range":"74","text":"75"},[755,761],"[data, display_data, handle_search, style, value]"]